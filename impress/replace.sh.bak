#!/bin/sh
cat ./src/_pages.md \
  | sed -e 's/&/\&amp;/g' \
  | sed -e 's/</\&lt;/g' \
  | sed -e 's/>/\&gt;/g' \
\
  | sed -e 's/"/\&quot;/g' \
  | sed -e 's/¡/\&iexcl;/g' \
  | sed -e 's/¢/\&cent;/g' \
  | sed -e 's/£/\&pound;/g' \
  | sed -e 's/¤/\&curren;/g' \
  | sed -e 's/¥/\&yen;/g' \
  | sed -e 's/¦/\&brvbar;/g' \
  | sed -e 's/§/\&sect;/g' \
  | sed -e 's/¨/\&uml;/g' \
  | sed -e 's/©/\&copy;/g' \
  | sed -e 's/ª/\&ordf;/g' \
  | sed -e 's/«/\&laquo;/g' \
  | sed -e 's/¬/\&not;/g' \
  | sed -e 's/­/\&shy;/g' \
  | sed -e 's/®/\&reg;/g' \
  | sed -e 's/¯/\&macr;/g' \
  | sed -e 's/°/\&deg;/g' \
  | sed -e 's/±/\&plusmn;/g' \
  | sed -e 's/²/\&sup2;/g' \
  | sed -e 's/³/\&sup3;/g' \
  | sed -e 's/´/\&acute;/g' \
  | sed -e 's/µ/\&micro;/g' \
  | sed -e 's/¶/\&para;/g' \
  | sed -e 's/·/\&middot;/g' \
  | sed -e 's/¸/\&cedil;/g' \
  | sed -e 's/¹/\&sup1;/g' \
  | sed -e 's/º/\&ordm;/g' \
  | sed -e 's/»/\&raquo;/g' \
  | sed -e 's/¼/\&frac14;/g' \
  | sed -e 's/½/\&frac12;/g' \
  | sed -e 's/¾/\&frac34;/g' \
  | sed -e 's/¿/\&iquest;/g' \
  | sed -e 's/À/\&Agrave;/g' \
  | sed -e 's/Á/\&Aacute;/g' \
  | sed -e 's/Â/\&Acirc;/g' \
  | sed -e 's/Ã/\&Atilde;/g' \
  | sed -e 's/Ä/\&Auml;/g' \
  | sed -e 's/Å/\&Aring;/g' \
  | sed -e 's/Æ/\&AElig;/g' \
  | sed -e 's/Ç/\&Ccedil;/g' \
  | sed -e 's/È/\&Egrave;/g' \
  | sed -e 's/É/\&Eacute;/g' \
  | sed -e 's/Ê/\&Ecirc;/g' \
  | sed -e 's/Ë/\&Euml;/g' \
  | sed -e 's/Ì/\&Igrave;/g' \
  | sed -e 's/Í/\&Iacute;/g' \
  | sed -e 's/Î/\&Icirc;/g' \
  | sed -e 's/Ï/\&Iuml;/g' \
  | sed -e 's/Ð/\&ETH;/g' \
  | sed -e 's/Ñ/\&Ntilde;/g' \
  | sed -e 's/Ò/\&Ograve;/g' \
  | sed -e 's/Ó/\&Oacute;/g' \
  | sed -e 's/Ô/\&Ocirc;/g' \
  | sed -e 's/Õ/\&Otilde;/g' \
  | sed -e 's/Ö/\&Ouml;/g' \
  | sed -e 's/×/\&times;/g' \
  | sed -e 's/Ø/\&Oslash;/g' \
  | sed -e 's/Ù/\&Ugrave;/g' \
  | sed -e 's/Ú/\&Uacute;/g' \
  | sed -e 's/Û/\&Ucirc;/g' \
  | sed -e 's/Ü/\&Uuml;/g' \
  | sed -e 's/Ý/\&Yacute;/g' \
  | sed -e 's/Þ/\&THORN;/g' \
  | sed -e 's/ß/\&szlig;/g' \
  | sed -e 's/à/\&agrave;/g' \
  | sed -e 's/á/\&aacute;/g' \
  | sed -e 's/â/\&acirc;/g' \
  | sed -e 's/ã/\&atilde;/g' \
  | sed -e 's/ä/\&auml;/g' \
  | sed -e 's/å/\&aring;/g' \
  | sed -e 's/æ/\&aelig;/g' \
  | sed -e 's/ç/\&ccedil;/g' \
  | sed -e 's/è/\&egrave;/g' \
  | sed -e 's/é/\&eacute;/g' \
  | sed -e 's/ê/\&ecirc;/g' \
  | sed -e 's/ë/\&euml;/g' \
  | sed -e 's/ì/\&igrave;/g' \
  | sed -e 's/í/\&iacute;/g' \
  | sed -e 's/î/\&icirc;/g' \
  | sed -e 's/ï/\&iuml;/g' \
  | sed -e 's/ð/\&eth;/g' \
  | sed -e 's/ñ/\&ntilde;/g' \
  | sed -e 's/ò/\&ograve;/g' \
  | sed -e 's/ó/\&oacute;/g' \
  | sed -e 's/ô/\&ocirc;/g' \
  | sed -e 's/õ/\&otilde;/g' \
  | sed -e 's/ö/\&ouml;/g' \
  | sed -e 's/÷/\&divide;/g' \
  | sed -e 's/ø/\&oslash;/g' \
  | sed -e 's/ù/\&ugrave;/g' \
  | sed -e 's/ú/\&uacute;/g' \
  | sed -e 's/û/\&ucirc;/g' \
  | sed -e 's/ü/\&uuml;/g' \
  | sed -e 's/ý/\&yacute;/g' \
  | sed -e 's/þ/\&thorn;/g' \
  | sed -e 's/ÿ/\&yuml;/g' \
  | sed -e 's/Œ/\&OElig;/g' \
  | sed -e 's/?/\&oelig;/g' \
  | sed -e 's/?/\&Scaron;/g' \
  | sed -e 's/?/\&scaron;/g' \
  | sed -e 's/?/\&Yuml;/g' \
  | sed -e 's/?/\&fnof;/g' \
  | sed -e 's/?/\&circ;/g' \
  | sed -e 's/?/\&tilde;/g' \
  | sed -e 's/Α/\&Alpha;/g' \
  | sed -e 's/Β/\&Beta;/g' \
  | sed -e 's/Γ/\&Gamma;/g' \
  | sed -e 's/Δ/\&Delta;/g' \
  | sed -e 's/Ε/\&Epsilon;/g' \
  | sed -e 's/Ζ/\&Zeta;/g' \
  | sed -e 's/Η/\&Eta;/g' \
  | sed -e 's/Θ/\&Theta;/g' \
  | sed -e 's/Ι/\&Iota;/g' \
  | sed -e 's/Κ/\&Kappa;/g' \
  | sed -e 's/Λ/\&Lambda;/g' \
  | sed -e 's/Μ/\&Mu;/g' \
  | sed -e 's/Ν/\&Nu;/g' \
  | sed -e 's/Ξ/\&Xi;/g' \
  | sed -e 's/Ο/\&Omicron;/g' \
  | sed -e 's/Π/\&Pi;/g' \
  | sed -e 's/Ρ/\&Rho;/g' \
  | sed -e 's/Σ/\&Sigma;/g' \
  | sed -e 's/Τ/\&Tau;/g' \
  | sed -e 's/Υ/\&Upsilon;/g' \
  | sed -e 's/Φ/\&Phi;/g' \
  | sed -e 's/Χ/\&Chi;/g' \
  | sed -e 's/Ψ/\&Psi;/g' \
  | sed -e 's/Ω/\&Omega;/g' \
  | sed -e 's/α/\&alpha;/g' \
  | sed -e 's/β/\&beta;/g' \
  | sed -e 's/γ/\&gamma;/g' \
  | sed -e 's/δ/\&delta;/g' \
  | sed -e 's/ε/\&epsilon;/g' \
  | sed -e 's/ζ/\&zeta;/g' \
  | sed -e 's/η/\&eta;/g' \
  | sed -e 's/θ/\&theta;/g' \
  | sed -e 's/ι/\&iota;/g' \
  | sed -e 's/κ/\&kappa;/g' \
  | sed -e 's/λ/\&lambda;/g' \
  | sed -e 's/μ/\&mu;/g' \
  | sed -e 's/ν/\&nu;/g' \
  | sed -e 's/ξ/\&xi;/g' \
  | sed -e 's/ο/\&omicron;/g' \
  | sed -e 's/π/\&pi;/g' \
  | sed -e 's/ρ/\&rho;/g' \
  | sed -e 's/?/\&sigmaf;/g' \
  | sed -e 's/σ/\&sigma;/g' \
  | sed -e 's/τ/\&tau;/g' \
  | sed -e 's/υ/\&upsilon;/g' \
  | sed -e 's/φ/\&phi;/g' \
  | sed -e 's/χ/\&chi;/g' \
  | sed -e 's/ψ/\&psi;/g' \
  | sed -e 's/ω/\&omega;/g' \
  | sed -e 's/?/\&thetasym;/g' \
  | sed -e 's/?/\&upsih;/g' \
  | sed -e 's/?/\&piv;/g' \
  | sed -e 's/?/\&bull;/g' \
  | sed -e 's/…/\&hellip;/g' \
  | sed -e 's/′/\&prime;/g' \
  | sed -e 's/″/\&Prime;/g' \
  | sed -e 's/?/\&oline;/g' \
  | sed -e 's/?/\&frasl;/g' \
  | sed -e 's/?/\&weierp;/g' \
  | sed -e 's/?/\&image;/g' \
  | sed -e 's/?/\&real;/g' \
  | sed -e 's/™/\&trade;/g' \
  | sed -e 's/?/\&alefsym;/g' \
  | sed -e 's/←/\&larr;/g' \
  | sed -e 's/↑/\&uarr;/g' \
  | sed -e 's/→/\&rarr;/g' \
  | sed -e 's/↓/\&darr;/g' \
  | sed -e 's/?/\&harr;/g' \
  | sed -e 's/?/\&crarr;/g' \
  | sed -e 's/?/\&lArr;/g' \
  | sed -e 's/?/\&uArr;/g' \
  | sed -e 's/⇒/\&rArr;/g' \
  | sed -e 's/?/\&dArr;/g' \
  | sed -e 's/⇔/\&hArr;/g' \
  | sed -e 's/∀/\&forall;/g' \
  | sed -e 's/∂/\&part;/g' \
  | sed -e 's/∃/\&exist;/g' \
  | sed -e 's/?/\&empty;/g' \
  | sed -e 's/∇/\&nabla;/g' \
  | sed -e 's/∈/\&isin;/g' \
  | sed -e 's/?/\&notin;/g' \
  | sed -e 's/∋/\&ni;/g' \
  | sed -e 's/?/\&prod;/g' \
  | sed -e 's/∑/\&sum;/g' \
  | sed -e 's/?/\&minus;/g' \
  | sed -e 's/?/\&lowast;/g' \
  | sed -e 's/√/\&radic;/g' \
  | sed -e 's/∝/\&prop;/g' \
  | sed -e 's/∞/\&infin;/g' \
  | sed -e 's/∠/\&ang;/g' \
  | sed -e 's/∧/\&and;/g' \
  | sed -e 's/∨/\&or;/g' \
  | sed -e 's/∩/\&cap;/g' \
  | sed -e 's/∪/\&cup;/g' \
  | sed -e 's/∫/\&int;/g' \
  | sed -e 's/∴/\&there4;/g' \
  | sed -e 's/?/\&sim;/g' \
  | sed -e 's/?/\&cong;/g' \
  | sed -e 's/?/\&asymp;/g' \
  | sed -e 's/≠/\&ne;/g' \
  | sed -e 's/≡/\&equiv;/g' \
  | sed -e 's/?/\&le;/g' \
  | sed -e 's/?/\&ge;/g' \
  | sed -e 's/⊂/\&sub;/g' \
  | sed -e 's/⊃/\&sup;/g' \
  | sed -e 's/?/\&nsub;/g' \
  | sed -e 's/⊆/\&sube;/g' \
  | sed -e 's/⊇/\&supe;/g' \
  | sed -e 's/?/\&oplus;/g' \
  | sed -e 's/?/\&otimes;/g' \
  | sed -e 's/⊥/\&perp;/g' \
  | sed -e 's/?/\&sdot;/g' \
  | sed -e 's/?/\&lceil;/g' \
  | sed -e 's/?/\&rceil;/g' \
  | sed -e 's/?/\&lfloor;/g' \
  | sed -e 's/?/\&rfloor;/g' \
  | sed -e 's/?/\&lang;/g' \
  | sed -e 's/?/\&rang;/g' \
  | sed -e 's/?/\&loz;/g' \
  | sed -e 's/?/\&spades;/g' \
  | sed -e 's/?/\&clubs;/g' \
  | sed -e 's/?/\&hearts;/g' \
  | sed -e 's/?/\&diams;/g' \
  | sed -e 's/?/\&ensp;/g' \
  | sed -e 's/?/\&emsp;/g' \
  | sed -e 's/?/\&thinsp;/g' \
  | sed -e 's/?/\&zwnj;/g' \
  | sed -e 's/?/\&zwj;/g' \
  | sed -e 's/?/\&lrm;/g' \
  | sed -e 's/?/\&rlm;/g' \
  | sed -e 's/?/\&ndash;/g' \
  | sed -e 's/?/\&mdash;/g' \
  | sed -e 's/‘/\&lsquo;/g' \
  | sed -e 's/’/\&rsquo;/g' \
  | sed -e 's/?/\&sbquo;/g' \
  | sed -e 's/“/\&ldquo;/g' \
  | sed -e 's/”/\&rdquo;/g' \
  | sed -e 's/?/\&bdquo;/g' \
  | sed -e 's/†/\&dagger;/g' \
  | sed -e 's/‡/\&Dagger;/g' \
  | sed -e 's/‰/\&permil;/g' \
  | sed -e 's/?/\&lsaquo;/g' \
\
  | sed -e 's/^    /\&nbsp;\&nbsp;\&nbsp;/g' \
  | sed -e 's/^  /\&nbsp;\&nbsp;/g' \
  | sed -e 's/^ /\&nbsp;/g' \
\
  | sed -e 's/^\([^#-].*\)$/  \1<\/br>/g' \
  | sed -e 's/^# \(.*\)$/  <h1>\1<\/h1>/g' \
  | sed -e 's/^## \(.*\)$/  <h2>\1<\/h2>/g' \
  | perl -0pe 's/\n---/<\/div>\n<div class='step' >/gm' \
  | sed -e "1 s/^/<div class='step' >\n/g" \
  | sed -e '$ s/$/\n<\/div>/g' \
  | perl -0pe 's/\n\n/\n  <\/br>\n/gm' \
  > ./src/_pages.ejs
